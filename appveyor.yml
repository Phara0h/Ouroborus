version: 1.0.{build}
branches:
  only:
  - master
image:
- macOS
- Ubuntu
- Visual Studio 2019
platform: Any CPU
environment:
  REPO:
    secure: RuxL+CFg1/bpi2CaOTBKt/4sCItaGoVeAzjtq246h9n5Z/vv+gT6Erm92A+/RWKdEK12UZAIuitS8tNlTVlbj7UfNIupGxt5n6po/VKiMlOD9tpyrhvymNQhDDBcfW6p
build_script:
- sh: >-
    cd http

    git clone https://github.com/uNetworking/uSockets

    cd ..

    make

    git checkout binaries

    cp dist/*.node .

    git add Ouroborus*

    git status

    git pull origin binaries

    git config --global user.email "jtwhissel@gmail.com"

    git config --global user.name "Phara0h"

    git commit -a -m "Updated binaries" --allow-empty

    git push ${REPO} binaries
